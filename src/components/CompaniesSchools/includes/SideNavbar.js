import React, { useEffect } from "react";
import { NavLink, useNavigate } from "react-router-dom";
import { useSelector, useDispatch } from "react-redux";
import { toggle } from "../../redux/actions/index";
import CustomScrollBar from "../../utils/ScrollBar";
import { toast } from "react-toastify";

export default function SideNavbar(props) {
  const navigate = useNavigate();

  const state = useSelector((state) => state.setToggle);
  const dispatcher = useDispatch();
  CustomScrollBar(".navbar-nav");
  var dashboardClass = window.location.pathname.match(/^\/dashboard/)
    ? "active"
    : "";
  var employee = window.location.pathname.match(
    /^\/employee-student-management/
  )
    ? "active"
    : "";
  var profile =
    window.location.pathname.match(/^\/profile/) ||
    window.location.pathname.match(/^\/billing-invoicing/)
      ? "active"
      : "";
  var requests = window.location.pathname.match(/^\/events-request/)
    ? "active"
    : "";
  var myEvents = window.location.pathname.match(/^\/my-events/) ? "active" : "";

  return (
    <>
      <div
        className={
          state?.state
            ? "rk-dashboard-sidebar"
            : "rk-dashboard-sidebar rk-menu-active"
        }
      >
        <nav className="navbar">
          <div className="rk-site-logo">
            <NavLink
              className="navbar-brand"
              to="/dashboard"
              onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
            >
              <img
                src="assets/images/logo.png"
                alt="logo"
                className="img-fluid"
              />
            </NavLink>
          </div>
          <ul className="navbar-nav">
            <li className="nav-item">
              <NavLink
                to="/dashboard"
                className={`nav-link ${dashboardClass}`}
                activeClassName="active"
                onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
              >
                <span className="nav-link-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12.75 9V3.75C12.75 3.53333 12.8208 3.35417 12.9625 3.2125C13.1042 3.07083 13.2833 3 13.5 3H20.25C20.4667 3 20.6458 3.07083 20.7875 3.2125C20.9292 3.35417 21 3.53333 21 3.75V9C21 9.21667 20.9292 9.39583 20.7875 9.5375C20.6458 9.67917 20.4667 9.75 20.25 9.75H13.5C13.2833 9.75 13.1042 9.67917 12.9625 9.5375C12.8208 9.39583 12.75 9.21667 12.75 9ZM3 12V3.75C3 3.53333 3.07083 3.35417 3.2125 3.2125C3.35417 3.07083 3.53333 3 3.75 3H10.5C10.7167 3 10.8958 3.07083 11.0375 3.2125C11.1792 3.35417 11.25 3.53333 11.25 3.75V12C11.25 12.2167 11.1792 12.3958 11.0375 12.5375C10.8958 12.6792 10.7167 12.75 10.5 12.75H3.75C3.53333 12.75 3.35417 12.6792 3.2125 12.5375C3.07083 12.3958 3 12.2167 3 12ZM12.75 20.25V12C12.75 11.7833 12.8208 11.6042 12.9625 11.4625C13.1042 11.3208 13.2833 11.25 13.5 11.25H20.25C20.4667 11.25 20.6458 11.3208 20.7875 11.4625C20.9292 11.6042 21 11.7833 21 12V20.25C21 20.4667 20.9292 20.6458 20.7875 20.7875C20.6458 20.9292 20.4667 21 20.25 21H13.5C13.2833 21 13.1042 20.9292 12.9625 20.7875C12.8208 20.6458 12.75 20.4667 12.75 20.25ZM3 20.25V15C3 14.7833 3.07083 14.6042 3.2125 14.4625C3.35417 14.3208 3.53333 14.25 3.75 14.25H10.5C10.7167 14.25 10.8958 14.3208 11.0375 14.4625C11.1792 14.6042 11.25 14.7833 11.25 15V20.25C11.25 20.4667 11.1792 20.6458 11.0375 20.7875C10.8958 20.9292 10.7167 21 10.5 21H3.75C3.53333 21 3.35417 20.9292 3.2125 20.7875C3.07083 20.6458 3 20.4667 3 20.25ZM4.5 11.25H9.75V4.5H4.5V11.25ZM14.25 19.5H19.5V12.75H14.25V19.5ZM14.25 8.25H19.5V4.5H14.25V8.25ZM4.5 19.5H9.75V15.75H4.5V19.5Z"
                      fill="#404252"
                    />
                  </svg>
                </span>
                <span>Dashboard</span>
              </NavLink>
            </li>

            <li className="nav-item">
              <NavLink
                to="/my-events"
                className={`nav-link ${myEvents}`}
                activeClassName="active"
                onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
              >
                <span className="nav-link-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M14.925 18.5C14.2417 18.5 13.6667 18.2667 13.2 17.8C12.7333 17.3333 12.5 16.7583 12.5 16.075C12.5 15.3917 12.7333 14.8167 13.2 14.35C13.6667 13.8833 14.2417 13.65 14.925 13.65C15.6083 13.65 16.1833 13.8833 16.65 14.35C17.1167 14.8167 17.35 15.3917 17.35 16.075C17.35 16.7583 17.1167 17.3333 16.65 17.8C16.1833 18.2667 15.6083 18.5 14.925 18.5ZM4.5 22C4.1 22 3.75 21.85 3.45 21.55C3.15 21.25 3 20.9 3 20.5V5C3 4.6 3.15 4.25 3.45 3.95C3.75 3.65 4.1 3.5 4.5 3.5H6.125V2.8C6.125 2.56667 6.2 2.375 6.35 2.225C6.5 2.075 6.69167 2 6.925 2C7.15833 2 7.35417 2.075 7.5125 2.225C7.67083 2.375 7.75 2.56667 7.75 2.8V3.5H16.25V2.8C16.25 2.56667 16.325 2.375 16.475 2.225C16.625 2.075 16.8167 2 17.05 2C17.2833 2 17.4792 2.075 17.6375 2.225C17.7958 2.375 17.875 2.56667 17.875 2.8V3.5H19.5C19.9 3.5 20.25 3.65 20.55 3.95C20.85 4.25 21 4.6 21 5V20.5C21 20.9 20.85 21.25 20.55 21.55C20.25 21.85 19.9 22 19.5 22H4.5ZM4.5 20.5H19.5V9.75H4.5V20.5ZM4.5 8.25H19.5V5H4.5V8.25ZM4.5 8.25V5V8.25Z"
                      fill="#404252"
                    />
                  </svg>
                </span>
                <span>My Events</span>
              </NavLink>
            </li>
            <li className="nav-item">
              <NavLink
                to="/events-request-list"
                className={`nav-link ${requests}`}
                activeClassName="active"
                onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
              >
                <span className="nav-link-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7.75 13.5C7.53333 13.5 7.35417 13.4292 7.2125 13.2875C7.07083 13.1458 7 12.9667 7 12.75C7 12.5333 7.07083 12.3542 7.2125 12.2125C7.35417 12.0708 7.53333 12 7.75 12H16.25C16.4667 12 16.6458 12.0708 16.7875 12.2125C16.9292 12.3542 17 12.5333 17 12.75C17 12.9667 16.9292 13.1458 16.7875 13.2875C16.6458 13.4292 16.4667 13.5 16.25 13.5H7.75ZM7.75 18C7.53333 18 7.35417 17.9292 7.2125 17.7875C7.07083 17.6458 7 17.4667 7 17.25C7 17.0333 7.07083 16.8542 7.2125 16.7125C7.35417 16.5708 7.53333 16.5 7.75 16.5H13.225C13.4417 16.5 13.6208 16.5708 13.7625 16.7125C13.9042 16.8542 13.975 17.0333 13.975 17.25C13.975 17.4667 13.9042 17.6458 13.7625 17.7875C13.6208 17.9292 13.4417 18 13.225 18H7.75ZM4.5 22C4.1 22 3.75 21.85 3.45 21.55C3.15 21.25 3 20.9 3 20.5V5C3 4.6 3.15 4.25 3.45 3.95C3.75 3.65 4.1 3.5 4.5 3.5H6.125V2.8C6.125 2.56667 6.20417 2.375 6.3625 2.225C6.52083 2.075 6.71667 2 6.95 2C7.18333 2 7.375 2.075 7.525 2.225C7.675 2.375 7.75 2.56667 7.75 2.8V3.5H16.25V2.8C16.25 2.56667 16.3292 2.375 16.4875 2.225C16.6458 2.075 16.8417 2 17.075 2C17.3083 2 17.5 2.075 17.65 2.225C17.8 2.375 17.875 2.56667 17.875 2.8V3.5H19.5C19.9 3.5 20.25 3.65 20.55 3.95C20.85 4.25 21 4.6 21 5V20.5C21 20.9 20.85 21.25 20.55 21.55C20.25 21.85 19.9 22 19.5 22H4.5ZM4.5 20.5H19.5V9.75H4.5V20.5ZM4.5 8.25H19.5V5H4.5V8.25ZM4.5 8.25V5V8.25Z"
                      fill="#404252"
                    />
                  </svg>
                </span>
                <span>Events Request</span>
              </NavLink>
            </li>
            <li className="nav-item">
              <NavLink
                to="/employee-student-management"
                className={`nav-link ${employee}`}
                activeClassName="active"
                onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
              >
                <span className="nav-link-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M10.8855 2C13.4022 2 15.5439 2.86667 17.3105 4.6C19.0772 6.33333 19.9605 8.45 19.9605 10.95C19.9605 10.9833 19.9605 11.025 19.9605 11.075C19.9605 11.125 19.9605 11.1667 19.9605 11.2H18.4605C18.4605 11.15 18.4605 11.0958 18.4605 11.0375C18.4605 10.9792 18.4605 10.925 18.4605 10.875C18.4605 8.80833 17.7189 7.0625 16.2355 5.6375C14.7522 4.2125 12.9689 3.5 10.8855 3.5C9.75219 3.5 8.68969 3.75833 7.69803 4.275C6.70636 4.79167 5.84386 5.475 5.11053 6.325H6.98553C7.20219 6.325 7.38136 6.39583 7.52303 6.5375C7.66469 6.67917 7.73553 6.85833 7.73553 7.075C7.73553 7.29167 7.66469 7.47083 7.52303 7.6125C7.38136 7.75417 7.20219 7.825 6.98553 7.825H3.26053C3.04386 7.825 2.86469 7.75417 2.72303 7.6125C2.58136 7.47083 2.51053 7.29167 2.51053 7.075V3.375C2.51053 3.15833 2.58136 2.97917 2.72303 2.8375C2.86469 2.69583 3.04386 2.625 3.26053 2.625C3.47719 2.625 3.65636 2.69583 3.79803 2.8375C3.93969 2.97917 4.01053 3.15833 4.01053 3.375V5.275C4.87719 4.25833 5.90636 3.45833 7.09803 2.875C8.28969 2.29167 9.55219 2 10.8855 2ZM12.9605 13.95L10.4605 11.5C10.3772 11.4167 10.3189 11.3292 10.2855 11.2375C10.2522 11.1458 10.2355 11.05 10.2355 10.95V6.675C10.2355 6.45833 10.3064 6.27917 10.448 6.1375C10.5897 5.99583 10.7689 5.925 10.9855 5.925C11.2022 5.925 11.3814 5.99583 11.523 6.1375C11.6647 6.27917 11.7355 6.45833 11.7355 6.675V10.65L13.7605 12.625L12.9605 13.95ZM10.8855 20C8.51886 20 6.49386 19.2083 4.81053 17.625C3.12719 16.0417 2.19386 14.125 2.01053 11.875C1.97719 11.6417 2.02303 11.4417 2.14803 11.275C2.27303 11.1083 2.45219 11.0167 2.68553 11C2.88553 10.9833 3.06053 11.0458 3.21053 11.1875C3.36053 11.3292 3.45219 11.5 3.48553 11.7C3.66886 13.6167 4.46053 15.2292 5.86053 16.5375C7.26053 17.8458 8.93553 18.5 10.8855 18.5H11.1855L12.0355 19.925C11.8522 19.9583 11.6647 19.9792 11.473 19.9875C11.2814 19.9958 11.0855 20 10.8855 20ZM17.0855 21.1C16.7855 21.0167 16.5022 20.9042 16.2355 20.7625C15.9689 20.6208 15.7189 20.4333 15.4855 20.2L14.3855 20.45C14.3022 20.4667 14.2189 20.4625 14.1355 20.4375C14.0522 20.4125 13.9939 20.3583 13.9605 20.275L13.6355 19.7C13.5855 19.6167 13.5689 19.5375 13.5855 19.4625C13.6022 19.3875 13.6439 19.3167 13.7105 19.25L14.6605 18.35C14.6105 18.15 14.5855 17.9417 14.5855 17.725C14.5855 17.5083 14.6105 17.3 14.6605 17.1L13.7105 16.2C13.6439 16.1333 13.6022 16.0625 13.5855 15.9875C13.5689 15.9125 13.5855 15.8333 13.6355 15.75L13.9605 15.175C13.9939 15.0917 14.0522 15.0375 14.1355 15.0125C14.2189 14.9875 14.3022 14.9833 14.3855 15L15.4855 15.25C15.7189 15.0167 15.9689 14.8292 16.2355 14.6875C16.5022 14.5458 16.7855 14.4333 17.0855 14.35L17.2855 13.025C17.3022 12.9417 17.348 12.8667 17.423 12.8C17.498 12.7333 17.5772 12.7 17.6605 12.7H18.3605C18.4439 12.7 18.523 12.7333 18.598 12.8C18.673 12.8667 18.7189 12.9417 18.7355 13.025L18.9355 14.35C19.2355 14.4333 19.5189 14.5458 19.7855 14.6875C20.0522 14.8292 20.3022 15.0167 20.5355 15.25L21.6355 15C21.7189 14.9833 21.8022 14.9875 21.8855 15.0125C21.9689 15.0375 22.0272 15.0917 22.0605 15.175L22.3855 15.75C22.4355 15.8333 22.4522 15.9125 22.4355 15.9875C22.4189 16.0625 22.3772 16.1333 22.3105 16.2L21.3605 17.1C21.4105 17.3 21.4355 17.5083 21.4355 17.725C21.4355 17.9417 21.4105 18.15 21.3605 18.35L22.3105 19.25C22.3772 19.3167 22.4189 19.3875 22.4355 19.4625C22.4522 19.5375 22.4355 19.6167 22.3855 19.7L22.0605 20.275C22.0272 20.3583 21.9689 20.4125 21.8855 20.4375C21.8022 20.4625 21.7189 20.4667 21.6355 20.45L20.5355 20.2C20.3022 20.4333 20.0522 20.6208 19.7855 20.7625C19.5189 20.9042 19.2355 21.0167 18.9355 21.1L18.7355 22.425C18.7189 22.5083 18.673 22.5833 18.598 22.65C18.523 22.7167 18.4439 22.75 18.3605 22.75H17.6605C17.5772 22.75 17.498 22.7167 17.423 22.65C17.348 22.5833 17.3022 22.5083 17.2855 22.425L17.0855 21.1ZM18.0105 19.725C18.6105 19.725 19.0939 19.5417 19.4605 19.175C19.8272 18.8083 20.0105 18.325 20.0105 17.725C20.0105 17.125 19.8272 16.6417 19.4605 16.275C19.0939 15.9083 18.6105 15.725 18.0105 15.725C17.4105 15.725 16.9272 15.9083 16.5605 16.275C16.1939 16.6417 16.0105 17.125 16.0105 17.725C16.0105 18.325 16.1939 18.8083 16.5605 19.175C16.9272 19.5417 17.4105 19.725 18.0105 19.725Z"
                      fill="#404252"
                    />
                  </svg>
                </span>
                <span>Employe Management</span>
              </NavLink>
            </li>
            <li className="nav-item">
              <NavLink
                to="/billing-invoicing"
                className={`nav-link ${profile}`}
                activeClassName="active"
                onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}
              >
                <span className="nav-link-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M3 21.65V2C3 2 3.02083 2 3.0625 2C3.10417 2 3.16667 2.04167 3.25 2.125L4.25 3.125C4.33333 3.20833 4.41667 3.25 4.5 3.25C4.58333 3.25 4.66667 3.20833 4.75 3.125L5.75 2.125C5.83333 2.04167 5.91667 2 6 2C6.08333 2 6.16667 2.04167 6.25 2.125L7.25 3.125C7.33333 3.20833 7.41667 3.25 7.5 3.25C7.58333 3.25 7.66667 3.20833 7.75 3.125L8.75 2.125C8.83333 2.04167 8.91667 2 9 2C9.08333 2 9.16667 2.04167 9.25 2.125L10.25 3.125C10.3333 3.20833 10.4167 3.25 10.5 3.25C10.5833 3.25 10.6667 3.20833 10.75 3.125L11.75 2.125C11.8333 2.04167 11.9167 2 12 2C12.0833 2 12.1667 2.04167 12.25 2.125L13.25 3.125C13.3333 3.20833 13.4167 3.25 13.5 3.25C13.5833 3.25 13.6667 3.20833 13.75 3.125L14.75 2.125C14.8333 2.04167 14.9167 2 15 2C15.0833 2 15.1667 2.04167 15.25 2.125L16.25 3.125C16.3333 3.20833 16.4167 3.25 16.5 3.25C16.5833 3.25 16.6667 3.20833 16.75 3.125L17.75 2.125C17.8333 2.04167 17.9167 2 18 2C18.0833 2 18.1667 2.04167 18.25 2.125L19.25 3.125C19.3333 3.20833 19.4167 3.25 19.5 3.25C19.5833 3.25 19.6667 3.20833 19.75 3.125L20.75 2.125C20.8333 2.04167 20.8958 2 20.9375 2C20.9792 2 21 2 21 2V21.65C21 21.65 20.9792 21.6583 20.9375 21.675C20.8958 21.6917 20.8333 21.6583 20.75 21.575L19.75 20.575C19.6667 20.4917 19.5833 20.45 19.5 20.45C19.4167 20.45 19.3333 20.4917 19.25 20.575L18.25 21.575C18.1667 21.6583 18.0833 21.7 18 21.7C17.9167 21.7 17.8333 21.6583 17.75 21.575L16.75 20.575C16.6667 20.4917 16.5833 20.45 16.5 20.45C16.4167 20.45 16.3333 20.4917 16.25 20.575L15.25 21.575C15.1667 21.6583 15.0833 21.7 15 21.7C14.9167 21.7 14.8333 21.6583 14.75 21.575L13.75 20.575C13.6667 20.4917 13.5833 20.45 13.5 20.45C13.4167 20.45 13.3333 20.4917 13.25 20.575L12.25 21.575C12.1667 21.6583 12.0833 21.7 12 21.7C11.9167 21.7 11.8333 21.6583 11.75 21.575L10.75 20.575C10.6667 20.4917 10.5833 20.45 10.5 20.45C10.4167 20.45 10.3333 20.4917 10.25 20.575L9.25 21.575C9.16667 21.6583 9.08333 21.7 9 21.7C8.91667 21.7 8.83333 21.6583 8.75 21.575L7.75 20.575C7.66667 20.4917 7.58333 20.45 7.5 20.45C7.41667 20.45 7.33333 20.4917 7.25 20.575L6.25 21.575C6.16667 21.6583 6.08333 21.7 6 21.7C5.91667 21.7 5.83333 21.6583 5.75 21.575L4.75 20.575C4.66667 20.4917 4.58333 20.45 4.5 20.45C4.41667 20.45 4.33333 20.4917 4.25 20.575L3.25 21.575C3.16667 21.6583 3.10417 21.6917 3.0625 21.675C3.02083 21.6583 3 21.65 3 21.65ZM6.675 16.45H17.425C17.6417 16.45 17.8208 16.3792 17.9625 16.2375C18.1042 16.0958 18.175 15.9167 18.175 15.7C18.175 15.4833 18.1042 15.3042 17.9625 15.1625C17.8208 15.0208 17.6417 14.95 17.425 14.95H6.675C6.45833 14.95 6.27917 15.0208 6.1375 15.1625C5.99583 15.3042 5.925 15.4833 5.925 15.7C5.925 15.9167 5.99583 16.0958 6.1375 16.2375C6.27917 16.3792 6.45833 16.45 6.675 16.45ZM6.675 12.6H17.425C17.6417 12.6 17.8208 12.5292 17.9625 12.3875C18.1042 12.2458 18.175 12.0667 18.175 11.85C18.175 11.6333 18.1042 11.4542 17.9625 11.3125C17.8208 11.1708 17.6417 11.1 17.425 11.1H6.675C6.45833 11.1 6.27917 11.1708 6.1375 11.3125C5.99583 11.4542 5.925 11.6333 5.925 11.85C5.925 12.0667 5.99583 12.2458 6.1375 12.3875C6.27917 12.5292 6.45833 12.6 6.675 12.6ZM6.675 8.725H17.425C17.6417 8.725 17.8208 8.65417 17.9625 8.5125C18.1042 8.37083 18.175 8.19167 18.175 7.975C18.175 7.75833 18.1042 7.57917 17.9625 7.4375C17.8208 7.29583 17.6417 7.225 17.425 7.225H6.675C6.45833 7.225 6.27917 7.29583 6.1375 7.4375C5.99583 7.57917 5.925 7.75833 5.925 7.975C5.925 8.19167 5.99583 8.37083 6.1375 8.5125C6.27917 8.65417 6.45833 8.725 6.675 8.725ZM4.5 19.3H19.5V4.4H4.5V19.3ZM4.5 4.4V19.3V4.4Z"
                      fill="#404252"
                    />
                  </svg>
                </span>
                <span>Billing & Invoicing</span>
              </NavLink>
            </li>
          </ul>

          <div className="rk-logged-user">
            <NavLink
              to="/profile"
              className={`rk-logged-user-img`}
              onClick={() => (state?.clicked ? dispatcher(toggle()) : "")}

              // activeClassName="active"
            >
              <img
                src={
                  localStorage.getItem("DM_rockoly_image") ==
                    "profile-img.png" ||
                  localStorage.getItem("DM_rockoly_image") == null ||
                  !localStorage.getItem("DM_rockoly_image")
                    ? "assets/images/profile-img.png"
                    : localStorage.getItem("DM_rockoly_image")
                }
                alt="user-profile"
                className="img-fluid"
              />
            </NavLink>
            <div className="rk-logged-user-detail">
              <h5 className="rk-logged-user-name">
                {localStorage.getItem("DM_rockoly_name")}
              </h5>
              <p className="rk-logged-user-designation">
                {/* {localStorage.getItem("DM_rockoly_occupation")} */}
              </p>
            </div>
          </div>
        </nav>
      </div>
    </>
  );
}
